
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../data_analysis/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>Querying Weaviate - Elysia API</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Querying Weaviate - Elysia API" >
      
        <meta  property="og:description"  content="None" >
      
        <meta  property="og:image"  content="./assets/images/social/Examples/query_weaviate.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="None" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Querying Weaviate - Elysia API" >
      
        <meta  name="twitter:description"  content="None" >
      
        <meta  name="twitter:image"  content="./assets/images/social/Examples/query_weaviate.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#querying-a-weaviate-database" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Elysia API" class="md-header__button md-logo" aria-label="Elysia API" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Elysia API
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Querying Weaviate
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../setting_up/" class="md-tabs__link">
        
  
  
    
  
  Setting Up

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../basic/" class="md-tabs__link">
        
  
  
    
  
  Basic Usage

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../advanced_usage/" class="md-tabs__link">
        
  
  
    
  
  Customising Elysia

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../creating_tools/" class="md-tabs__link">
        
  
  
    
  
  Creating a Tool

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Advanced/" class="md-tabs__link">
          
  
  
  Advanced

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../API/" class="md-tabs__link">
          
  
  
  API

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Reference/Preprocessor/" class="md-tabs__link">
          
  
  
  Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Elysia API" class="md-nav__button md-logo" aria-label="Elysia API" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Elysia API
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../setting_up/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setting Up
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic Usage
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced_usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Customising Elysia
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../creating_tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating a Tool
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Advanced
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Advanced
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Advanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Advanced/technical_overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Technical Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Advanced/advanced_tool_construction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tool Construction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Advanced/custom_objects/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom Objects
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Advanced/environment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Environment
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../API/user_and_tree_managers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../API/payload_formats/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Payload Formats
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Querying Weaviate
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Querying Weaviate
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-you-begin" class="md-nav__link">
    <span class="md-ellipsis">
      Before You Begin
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up" class="md-nav__link">
    <span class="md-ellipsis">
      Setting up
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optional-add-some-data-to-your-weaviate-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Optional: Add some data to your Weaviate cluster
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preprocessing-with-elysia" class="md-nav__link">
    <span class="md-ellipsis">
      Preprocessing with Elysia
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-decision-tree" class="md-nav__link">
    <span class="md-ellipsis">
      Creating the Decision Tree
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-the-decision-tree" class="md-nav__link">
    <span class="md-ellipsis">
      Running the Decision Tree
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#continuing-the-conversation" class="md-nav__link">
    <span class="md-ellipsis">
      Continuing the Conversation
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data_analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic Linear Regression
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Reference/Preprocessor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Preprocessor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Reference/Tree/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tree
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Reference/Client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WeaviateClient
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Reference/Managers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Managers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Reference/Settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Settings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Reference/Objects/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Objects
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Reference/PayloadTypes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Payload Types
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Reference/Util/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Util
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="querying-a-weaviate-database">Querying a Weaviate Database</h1>
<p>This example will walk through using Elysia to:</p>
<ul>
<li>Setting up your API keys with Elysia for using models</li>
<li>Setting up your Weaviate collections for usage with Elysia</li>
<li>Query or aggregate your Weaviate collections</li>
<li>How the decision tree works</li>
</ul>
<h2 id="before-you-begin">Before You Begin</h2>
<p>Before setting up your environment and connecting to Weaviate, make sure you have the necessary API keys and access credentials for both your language models and your Weaviate instance. This will ensure a smooth setup process in the following steps.</p>
<ol>
<li><a href="https://docs.weaviate.io/weaviate/quickstart#step-1-set-up-weaviate">You should have a Weaviate cloud cluster - see Step 1.1 in the Weaviate quickstart guide.</a></li>
<li><a href="https://docs.weaviate.io/weaviate/quickstart#13-connect-to-weaviate">You need to find your REST endpoint URL and Admin API key for your cluster - see Step 1.3 in the Weaviate quickstart guide</a></li>
<li>You additionally need API keys for any LLMs you want to use. We recommend <a href="https://openrouter.ai/">OpenRouter</a> to gain access to a range of models.</li>
</ol>
<h2 id="setting-up">Setting up</h2>
<p>Let's use the basic elysia <code>configure</code> to both <em>set up your models</em> and <em>connect to your Weaviate cluster</em>.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">elysia</span><span class="w"> </span><span class="kn">import</span> <span class="n">configure</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="n">configure</span><span class="p">(</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="n">wcd_url</span> <span class="o">=</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span> <span class="c1"># replace with your Weaviate REST endpoint URL</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n">wcd_api_key</span> <span class="o">=</span> <span class="s2">&quot;...&quot;</span> <span class="c1"># replace with your Weaviate cluster API key,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n">base_model</span> <span class="o">=</span> <span class="s2">&quot;gemini-2.0.flash-001&quot;</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="n">base_provider</span> <span class="o">=</span> <span class="s2">&quot;gemini&quot;</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="n">complex_model</span> <span class="o">=</span> <span class="s2">&quot;gemini-2.5.flash-001&quot;</span><span class="p">,</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    <span class="n">complex_provider</span> <span class="o">=</span> <span class="s2">&quot;gemini&quot;</span><span class="p">,</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    <span class="n">gemini_api_key</span> <span class="o">=</span> <span class="s2">&quot;...&quot;</span> <span class="c1"># replace with your GEMINI_API_KEY from Google AI studio</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="p">)</span>
</code></pre></div>
Alternatively, you can use different models, such as <code>gpt-4.1-mini</code>, <code>gpt-4.1</code>, with <code>base_provider="openai"</code> and <code>complex_provider="openai"</code>, as well as an <code>openai_api_key</code>. Or any model/provider combination that you wish, <a href="https://docs.litellm.ai/docs/providers">see the full LiteLLM docs for all API keys and models/providers</a>.</p>
<h2 id="optional-add-some-data-to-your-weaviate-cluster">Optional: Add some data to your Weaviate cluster</h2>
<p>We're going to create some basic data and an example collection for this demo. This is based on <a href="https://docs.weaviate.io/weaviate/recipes/generative_search_aws_bedrock">this example in the Weaviate docs</a>.</p>
<p>If you want to skip this step and use data from your own collection, simply replace all instances of the collection name "JeopardyQuestion" with your true collection name in later steps.</p>
<ol>
<li>
<p>Download the example dataset.
    <div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span><span class="o">,</span><span class="w"> </span><span class="nn">json</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://raw.githubusercontent.com/weaviate/weaviate-examples/main/jeopardy_small_dataset/jeopardy_tiny.json&quot;</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>
    This dataset contains questions, answers and categories from Jeopardy questions. E.g.
    <div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>{
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>    &quot;Category&quot;: &quot;SCIENCE&quot;,
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>    &quot;Question&quot;: &quot;This organ removes excess glucose from the blood &amp; stores it as glycogen&quot;,
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>    &quot;Answer&quot;: &quot;Liver&quot;
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>}
</code></pre></div></p>
</li>
<li>
<p>Import the data into Weaviate
    <div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">elysia.util.client</span><span class="w"> </span><span class="kn">import</span> <span class="n">ClientManager</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="n">client_manager</span> <span class="o">=</span> <span class="n">ClientManager</span><span class="p">()</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="k">with</span> <span class="n">client_manager</span><span class="o">.</span><span class="n">connect_to_client</span><span class="p">()</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>    <span class="k">if</span> <span class="n">client</span><span class="o">.</span><span class="n">collections</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;JeopardyQuestion&quot;</span><span class="p">):</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>        <span class="n">client</span><span class="o">.</span><span class="n">collections</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;JeopardyQuestion&quot;</span><span class="p">)</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>    <span class="n">client</span><span class="o">.</span><span class="n">collections</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>        <span class="s2">&quot;JeopardyQuestion&quot;</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>    <span class="p">)</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>    <span class="n">jeopardy</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">collections</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;JeopardyQuestion&quot;</span><span class="p">)</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>    <span class="n">response</span> <span class="o">=</span> <span class="n">jeopardy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">insert_many</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">has_errors</span><span class="p">:</span>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>        <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span>
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Insert complete.&quot;</span><span class="p">)</span>
</code></pre></div>
    This will by default use the settings inherited from the earlier <code>configure</code> function, so the Weaviate REST endpoint URL and API key set up previously.</p>
</li>
</ol>
<h2 id="preprocessing-with-elysia">Preprocessing with Elysia</h2>
<p>Now that you are fully set up with models and Weaviate integrations, you can move onto preprocessing your collection for use with Elysia. This is as simple as:
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">elysia</span><span class="w"> </span><span class="kn">import</span> <span class="n">preprocess</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">preprocess</span><span class="p">(</span><span class="s2">&quot;JeopardyQuestion&quot;</span><span class="p">)</span>
</code></pre></div></p>
<details closed>
<summary>View the Preprocessed Data</summary>

To view the preprocessing that has been completed, you can run the `view_preprocessed_collection` function on your collection:

<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">elysia</span><span class="w"> </span><span class="kn">import</span> <span class="n">view_preprocessed_collection</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="n">view_preprocessed_collection</span><span class="p">(</span><span class="s2">&quot;JeopardyQuestion&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="p">{</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">    </span><span class="nt">&quot;mappings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">        </span><span class="nt">&quot;document&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;question&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;category&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;category&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;author&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">},</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">        </span><span class="nt">&quot;table&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;category&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;category&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;question&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;question&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;answer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;answer&quot;</span><span class="p">}</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">    </span><span class="nt">&quot;prompts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">        </span><span class="s2">&quot;What are some questions about DNA?&quot;</span><span class="p">,</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">        </span><span class="s2">&quot;What questions are in the SCIENCE category?&quot;</span><span class="p">,</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">        </span><span class="s2">&quot;What questions are in the ANIMALS category?&quot;</span><span class="p">,</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">        </span><span class="s2">&quot;What are some questions about mammals?&quot;</span><span class="p">,</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">        </span><span class="s2">&quot;What are some questions about snakes?&quot;</span><span class="p">,</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="w">        </span><span class="s2">&quot;What are the answers related to science?&quot;</span><span class="p">,</span>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="w">        </span><span class="s2">&quot;What are the answers related to animals?&quot;</span><span class="p">,</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="w">        </span><span class="s2">&quot;What questions involve the atmosphere?&quot;</span><span class="p">,</span>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="w">        </span><span class="s2">&quot;What questions involve metals?&quot;</span><span class="p">,</span>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="w">        </span><span class="s2">&quot;What questions involve organs?&quot;</span>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="w">    </span><span class="p">],</span>
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a><span class="w">    </span><span class="nt">&quot;fields&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="w">            </span><span class="nt">&quot;range&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">4.0</span><span class="p">],</span>
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a><span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;text&quot;</span><span class="p">,</span>
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a><span class="w">            </span><span class="nt">&quot;groups&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a><span class="w">                </span><span class="p">{</span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DNA&quot;</span><span class="p">},</span>
<a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a><span class="w">                </span><span class="p">{</span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the atmosphere&quot;</span><span class="p">},</span>
<a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a><span class="w">                </span><span class="p">{</span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;wire&quot;</span><span class="p">},</span>
<a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a><span class="w">                </span><span class="p">{</span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Elephant&quot;</span><span class="p">},</span>
<a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a><span class="w">                </span><span class="p">{</span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Antelope&quot;</span><span class="p">},</span>
<a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a><span class="w">                </span><span class="p">{</span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;species&quot;</span><span class="p">},</span>
<a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a><span class="w">                </span><span class="p">{</span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Liver&quot;</span><span class="p">},</span>
<a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a><span class="w">                </span><span class="p">{</span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Sound barrier&quot;</span><span class="p">},</span>
<a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a><span class="w">                </span><span class="p">{</span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the diamondback rattler&quot;</span><span class="p">},</span>
<a id="__codelineno-6-32" name="__codelineno-6-32" href="#__codelineno-6-32"></a><span class="w">                </span><span class="p">{</span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the nose or snout&quot;</span><span class="p">}</span>
<a id="__codelineno-6-33" name="__codelineno-6-33" href="#__codelineno-6-33"></a><span class="w">            </span><span class="p">],</span>
<a id="__codelineno-6-34" name="__codelineno-6-34" href="#__codelineno-6-34"></a><span class="w">            </span><span class="nt">&quot;mean&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.7</span><span class="p">,</span>
<a id="__codelineno-6-35" name="__codelineno-6-35" href="#__codelineno-6-35"></a><span class="w">            </span><span class="nt">&quot;date_range&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">No</span><span class="kc">ne</span><span class="p">,</span>
<a id="__codelineno-6-36" name="__codelineno-6-36" href="#__codelineno-6-36"></a><span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;answer&quot;</span><span class="p">,</span>
<a id="__codelineno-6-37" name="__codelineno-6-37" href="#__codelineno-6-37"></a><span class="w">            </span><span class="nt">&quot;date_median&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">No</span><span class="kc">ne</span><span class="p">,</span>
<a id="__codelineno-6-38" name="__codelineno-6-38" href="#__codelineno-6-38"></a><span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The correct response to the question posed in the &#39;question&#39; field. This is a string </span>
<a id="__codelineno-6-39" name="__codelineno-6-39" href="#__codelineno-6-39"></a><span class="s2">containing the answer.&quot;</span>
<a id="__codelineno-6-40" name="__codelineno-6-40" href="#__codelineno-6-40"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-6-41" name="__codelineno-6-41" href="#__codelineno-6-41"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-6-42" name="__codelineno-6-42" href="#__codelineno-6-42"></a><span class="w">            </span><span class="nt">&quot;range&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">],</span>
<a id="__codelineno-6-43" name="__codelineno-6-43" href="#__codelineno-6-43"></a><span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;text&quot;</span><span class="p">,</span>
<a id="__codelineno-6-44" name="__codelineno-6-44" href="#__codelineno-6-44"></a><span class="w">            </span><span class="nt">&quot;groups&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SCIENCE&quot;</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ANIMALS&quot;</span><span class="p">}],</span>
<a id="__codelineno-6-45" name="__codelineno-6-45" href="#__codelineno-6-45"></a><span class="w">            </span><span class="nt">&quot;mean&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span>
<a id="__codelineno-6-46" name="__codelineno-6-46" href="#__codelineno-6-46"></a><span class="w">            </span><span class="nt">&quot;date_range&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">No</span><span class="kc">ne</span><span class="p">,</span>
<a id="__codelineno-6-47" name="__codelineno-6-47" href="#__codelineno-6-47"></a><span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;category&quot;</span><span class="p">,</span>
<a id="__codelineno-6-48" name="__codelineno-6-48" href="#__codelineno-6-48"></a><span class="w">            </span><span class="nt">&quot;date_median&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">No</span><span class="kc">ne</span><span class="p">,</span>
<a id="__codelineno-6-49" name="__codelineno-6-49" href="#__codelineno-6-49"></a><span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The subject area or topic to which the question and answer belong. Examples include </span>
<a id="__codelineno-6-50" name="__codelineno-6-50" href="#__codelineno-6-50"></a><span class="s2">&#39;SCIENCE&#39; and &#39;ANIMALS&#39;.&quot;</span>
<a id="__codelineno-6-51" name="__codelineno-6-51" href="#__codelineno-6-51"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-6-52" name="__codelineno-6-52" href="#__codelineno-6-52"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-6-53" name="__codelineno-6-53" href="#__codelineno-6-53"></a><span class="w">            </span><span class="nt">&quot;range&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">10.0</span><span class="p">,</span><span class="w"> </span><span class="mf">22.0</span><span class="p">],</span>
<a id="__codelineno-6-54" name="__codelineno-6-54" href="#__codelineno-6-54"></a><span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;text&quot;</span><span class="p">,</span>
<a id="__codelineno-6-55" name="__codelineno-6-55" href="#__codelineno-6-55"></a><span class="w">            </span><span class="nt">&quot;groups&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-6-56" name="__codelineno-6-56" href="#__codelineno-6-56"></a><span class="w">                </span><span class="p">{</span>
<a id="__codelineno-6-57" name="__codelineno-6-57" href="#__codelineno-6-57"></a><span class="w">                    </span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-6-58" name="__codelineno-6-58" href="#__codelineno-6-58"></a><span class="w">                    </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;A metal that is &#39;ductile&#39; can be pulled into this while cold &amp; under pressure&quot;</span>
<a id="__codelineno-6-59" name="__codelineno-6-59" href="#__codelineno-6-59"></a><span class="w">                </span><span class="p">},</span>
<a id="__codelineno-6-60" name="__codelineno-6-60" href="#__codelineno-6-60"></a><span class="w">                </span><span class="p">{</span>
<a id="__codelineno-6-61" name="__codelineno-6-61" href="#__codelineno-6-61"></a><span class="w">                    </span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-6-62" name="__codelineno-6-62" href="#__codelineno-6-62"></a><span class="w">                    </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The gavial looks very much like a crocodile except for this bodily feature&quot;</span>
<a id="__codelineno-6-63" name="__codelineno-6-63" href="#__codelineno-6-63"></a><span class="w">                </span><span class="p">},</span>
<a id="__codelineno-6-64" name="__codelineno-6-64" href="#__codelineno-6-64"></a><span class="w">                </span><span class="p">{</span>
<a id="__codelineno-6-65" name="__codelineno-6-65" href="#__codelineno-6-65"></a><span class="w">                    </span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-6-66" name="__codelineno-6-66" href="#__codelineno-6-66"></a><span class="w">                    </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;In 1953 Watson &amp; Crick built a model of the molecular structure of this, the </span>
<a id="__codelineno-6-67" name="__codelineno-6-67" href="#__codelineno-6-67"></a><span class="s2">gene-carrying substance&quot;</span>
<a id="__codelineno-6-68" name="__codelineno-6-68" href="#__codelineno-6-68"></a><span class="w">                </span><span class="p">},</span>
<a id="__codelineno-6-69" name="__codelineno-6-69" href="#__codelineno-6-69"></a><span class="w">                </span><span class="p">{</span>
<a id="__codelineno-6-70" name="__codelineno-6-70" href="#__codelineno-6-70"></a><span class="w">                    </span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-6-71" name="__codelineno-6-71" href="#__codelineno-6-71"></a><span class="w">                    </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Weighing around a ton, the eland is the largest species of this animal in Africa&quot;</span>
<a id="__codelineno-6-72" name="__codelineno-6-72" href="#__codelineno-6-72"></a><span class="w">                </span><span class="p">},</span>
<a id="__codelineno-6-73" name="__codelineno-6-73" href="#__codelineno-6-73"></a><span class="w">                </span><span class="p">{</span>
<a id="__codelineno-6-74" name="__codelineno-6-74" href="#__codelineno-6-74"></a><span class="w">                    </span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-6-75" name="__codelineno-6-75" href="#__codelineno-6-75"></a><span class="w">                    </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2000 news: the Gunnison sage grouse isn&#39;t just another northern sage grouse, but a </span>
<a id="__codelineno-6-76" name="__codelineno-6-76" href="#__codelineno-6-76"></a><span class="s2">new one of this classification&quot;</span>
<a id="__codelineno-6-77" name="__codelineno-6-77" href="#__codelineno-6-77"></a><span class="w">                </span><span class="p">},</span>
<a id="__codelineno-6-78" name="__codelineno-6-78" href="#__codelineno-6-78"></a><span class="w">                </span><span class="p">{</span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;It&#39;s the only living mammal in the order Proboseidea&quot;</span><span class="p">},</span>
<a id="__codelineno-6-79" name="__codelineno-6-79" href="#__codelineno-6-79"></a><span class="w">                </span><span class="p">{</span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;This organ removes excess glucose from the blood &amp; stores it as glycogen&quot;</span><span class="p">},</span>
<a id="__codelineno-6-80" name="__codelineno-6-80" href="#__codelineno-6-80"></a><span class="w">                </span><span class="p">{</span>
<a id="__codelineno-6-81" name="__codelineno-6-81" href="#__codelineno-6-81"></a><span class="w">                    </span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-6-82" name="__codelineno-6-82" href="#__codelineno-6-82"></a><span class="w">                    </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;In 70-degree air, a plane traveling at about 1,130 feet per second breaks it&quot;</span>
<a id="__codelineno-6-83" name="__codelineno-6-83" href="#__codelineno-6-83"></a><span class="w">                </span><span class="p">},</span>
<a id="__codelineno-6-84" name="__codelineno-6-84" href="#__codelineno-6-84"></a><span class="w">                </span><span class="p">{</span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Heaviest of all poisonous snakes is this North American rattlesnake&quot;</span><span class="p">},</span>
<a id="__codelineno-6-85" name="__codelineno-6-85" href="#__codelineno-6-85"></a><span class="w">                </span><span class="p">{</span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Changes in the tropospheric layer of this are what gives us weather&quot;</span><span class="p">}</span>
<a id="__codelineno-6-86" name="__codelineno-6-86" href="#__codelineno-6-86"></a><span class="w">            </span><span class="p">],</span>
<a id="__codelineno-6-87" name="__codelineno-6-87" href="#__codelineno-6-87"></a><span class="w">            </span><span class="nt">&quot;mean&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">15.0</span><span class="p">,</span>
<a id="__codelineno-6-88" name="__codelineno-6-88" href="#__codelineno-6-88"></a><span class="w">            </span><span class="nt">&quot;date_range&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">No</span><span class="kc">ne</span><span class="p">,</span>
<a id="__codelineno-6-89" name="__codelineno-6-89" href="#__codelineno-6-89"></a><span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;question&quot;</span><span class="p">,</span>
<a id="__codelineno-6-90" name="__codelineno-6-90" href="#__codelineno-6-90"></a><span class="w">            </span><span class="nt">&quot;date_median&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">No</span><span class="kc">ne</span><span class="p">,</span>
<a id="__codelineno-6-91" name="__codelineno-6-91" href="#__codelineno-6-91"></a><span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The question or prompt for which the &#39;answer&#39; field provides the correct response. This</span>
<a id="__codelineno-6-92" name="__codelineno-6-92" href="#__codelineno-6-92"></a><span class="s2">is a string containing the question.&quot;</span>
<a id="__codelineno-6-93" name="__codelineno-6-93" href="#__codelineno-6-93"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-6-94" name="__codelineno-6-94" href="#__codelineno-6-94"></a><span class="w">    </span><span class="p">],</span>
<a id="__codelineno-6-95" name="__codelineno-6-95" href="#__codelineno-6-95"></a><span class="w">    </span><span class="nt">&quot;summary&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;This dataset contains questions and answers across various categories, primarily focusing on </span>
<a id="__codelineno-6-96" name="__codelineno-6-96" href="#__codelineno-6-96"></a><span class="s2">science and animals. Each entry includes a question, its corresponding answer, and the category to which the </span>
<a id="__codelineno-6-97" name="__codelineno-6-97" href="#__codelineno-6-97"></a><span class="s2">question belongs. The dataset provides a diverse set of trivia-like information suitable for quizzes or educational</span>
<a id="__codelineno-6-98" name="__codelineno-6-98" href="#__codelineno-6-98"></a><span class="s2">purposes. The sample represents the entire dataset. The &#39;question&#39; field is related to the &#39;answer&#39; field, as the </span>
<a id="__codelineno-6-99" name="__codelineno-6-99" href="#__codelineno-6-99"></a><span class="s2">&#39;answer&#39; provides the correct response to the &#39;question&#39;. The &#39;category&#39; field classifies the &#39;question&#39; and </span>
<a id="__codelineno-6-100" name="__codelineno-6-100" href="#__codelineno-6-100"></a><span class="s2">&#39;answer&#39; pair into a specific subject area. The category helps to group questions of similar topics together. The </span>
<a id="__codelineno-6-101" name="__codelineno-6-101" href="#__codelineno-6-101"></a><span class="s2">data is structured as a list of JSON objects. Each object contains three fields: &#39;answer&#39;, &#39;category&#39;, and </span>
<a id="__codelineno-6-102" name="__codelineno-6-102" href="#__codelineno-6-102"></a><span class="s2">&#39;question&#39;. No irregularities found. &quot;</span><span class="p">,</span>
<a id="__codelineno-6-103" name="__codelineno-6-103" href="#__codelineno-6-103"></a><span class="w">    </span><span class="nt">&quot;vectorizer&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">No</span><span class="kc">ne</span><span class="p">,</span>
<a id="__codelineno-6-104" name="__codelineno-6-104" href="#__codelineno-6-104"></a><span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;JeopardyQuestion&quot;</span><span class="p">,</span>
<a id="__codelineno-6-105" name="__codelineno-6-105" href="#__codelineno-6-105"></a><span class="w">    </span><span class="nt">&quot;named_vectors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-6-106" name="__codelineno-6-106" href="#__codelineno-6-106"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-6-107" name="__codelineno-6-107" href="#__codelineno-6-107"></a><span class="w">            </span><span class="nt">&quot;source_properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">No</span><span class="kc">ne</span><span class="p">,</span>
<a id="__codelineno-6-108" name="__codelineno-6-108" href="#__codelineno-6-108"></a><span class="w">            </span><span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span>
<a id="__codelineno-6-109" name="__codelineno-6-109" href="#__codelineno-6-109"></a><span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;default&quot;</span><span class="p">,</span>
<a id="__codelineno-6-110" name="__codelineno-6-110" href="#__codelineno-6-110"></a><span class="w">            </span><span class="nt">&quot;model&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Snowflake/snowflake-arctic-embed-l-v2.0&quot;</span><span class="p">,</span>
<a id="__codelineno-6-111" name="__codelineno-6-111" href="#__codelineno-6-111"></a><span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<a id="__codelineno-6-112" name="__codelineno-6-112" href="#__codelineno-6-112"></a><span class="w">            </span><span class="nt">&quot;vectorizer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TEXT2VEC_WEAVIATE&quot;</span>
<a id="__codelineno-6-113" name="__codelineno-6-113" href="#__codelineno-6-113"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-6-114" name="__codelineno-6-114" href="#__codelineno-6-114"></a><span class="w">    </span><span class="p">],</span>
<a id="__codelineno-6-115" name="__codelineno-6-115" href="#__codelineno-6-115"></a><span class="w">    </span><span class="nt">&quot;index_properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;isTimestampIndexed&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;isNullIndexed&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;isLengthIndexed&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="p">},</span>
<a id="__codelineno-6-116" name="__codelineno-6-116" href="#__codelineno-6-116"></a><span class="w">    </span><span class="nt">&quot;length&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0</span>
<a id="__codelineno-6-117" name="__codelineno-6-117" href="#__codelineno-6-117"></a><span class="p">}</span>
</code></pre></div>
</details>

<h2 id="creating-the-decision-tree">Creating the Decision Tree</h2>
<p>Now that the models and Weaviate integrations are set up (with <code>configure</code>), the default parameters to run the decision tree will also work automatically. </p>
<p>Let's first create the class and inspect some of the properties.
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">elysia</span><span class="w"> </span><span class="kn">import</span> <span class="n">Tree</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="n">tree</span> <span class="o">=</span> <span class="n">Tree</span><span class="p">()</span>
</code></pre></div></p>
<details closed>
<summary>Inspecting the Decision Tree Structure</summary>
To look at what tools are currently on the tree, we can inspect use the `tree.view()` method:

<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nb">print</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">view</span><span class="p">())</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a> Base (base)
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>    Cited summarize (cited_summarize)
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>       Summarize retrieved information for the user when all relevant data has
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>         been gathered. Provides a text response, and may end the conversation, but
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>         unlike text_response tool, can be used mid-conversation. Avoid for general
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>         questions where text_response is available. Summarisation text is directly
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>         displayed to the user. Most of the time, you can choose end_actions to be
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>         True to end the conversation with a summary. This is a good way to end the
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>         conversation.
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>    Text response (text_response)
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a>       End the conversation. This should be used when the user has finished their
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a>         query, or you have nothing more to do except reply. You should use this to
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a>         answer conversational questions not related to other tools. But do not use
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a>         this as a source of information. All information should be from the
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a>         environment if answering a complex question or an explanation. If there is
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a>         an error and you could not complete a task, use this tool to suggest a
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a>         brief reason why. If, for example, there is a missing API key, then the
<a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a>         user needs to add it to the settings (which you should inform them of). Or
<a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a>         you cannot connect to weaviate, then the user needs to input their API
<a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a>         keys in the settings. If there are no collections available, the user
<a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a>         needs to analyze this in the &#39;data&#39; tab. If there are other problems, and
<a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a>         it looks like the user can fix it, then provide a suggestion.
<a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a>
<a id="__codelineno-9-26" name="__codelineno-9-26" href="#__codelineno-9-26"></a>
<a id="__codelineno-9-27" name="__codelineno-9-27" href="#__codelineno-9-27"></a>    Aggregate (aggregate)
<a id="__codelineno-9-28" name="__codelineno-9-28" href="#__codelineno-9-28"></a>       Query the knowledge base specifically for aggregation queries. Performs
<a id="__codelineno-9-29" name="__codelineno-9-29" href="#__codelineno-9-29"></a>         calculations (counting, averaging, summing, etc.) and provides summary
<a id="__codelineno-9-30" name="__codelineno-9-30" href="#__codelineno-9-30"></a>         statistics on data. It can group data by properties and apply filters
<a id="__codelineno-9-31" name="__codelineno-9-31" href="#__codelineno-9-31"></a>         directly, without needing a prior query. Aggregation queries can be
<a id="__codelineno-9-32" name="__codelineno-9-32" href="#__codelineno-9-32"></a>         filtered. This can be applied directly on any collections in the schema.
<a id="__codelineno-9-33" name="__codelineno-9-33" href="#__codelineno-9-33"></a>         Use this tool when you need counts, sums, averages, or other summary
<a id="__codelineno-9-34" name="__codelineno-9-34" href="#__codelineno-9-34"></a>         statistics on properties in the collections. &#39;aggregate&#39; should be
<a id="__codelineno-9-35" name="__codelineno-9-35" href="#__codelineno-9-35"></a>         considered the first choice for tasks involving counting, summing,
<a id="__codelineno-9-36" name="__codelineno-9-36" href="#__codelineno-9-36"></a>         averaging, or other statistical operations, even when filtering is
<a id="__codelineno-9-37" name="__codelineno-9-37" href="#__codelineno-9-37"></a>         required.
<a id="__codelineno-9-38" name="__codelineno-9-38" href="#__codelineno-9-38"></a>
<a id="__codelineno-9-39" name="__codelineno-9-39" href="#__codelineno-9-39"></a>
<a id="__codelineno-9-40" name="__codelineno-9-40" href="#__codelineno-9-40"></a>    Base.query (base.query)
<a id="__codelineno-9-41" name="__codelineno-9-41" href="#__codelineno-9-41"></a>       Retrieves and displays specific data entries from the collections. Then,
<a id="__codelineno-9-42" name="__codelineno-9-42" href="#__codelineno-9-42"></a>         query with semantic search, keyword search, or a combination of both.
<a id="__codelineno-9-43" name="__codelineno-9-43" href="#__codelineno-9-43"></a>         Queries can be filtered, sorted, and more. Retrieving and displaying
<a id="__codelineno-9-44" name="__codelineno-9-44" href="#__codelineno-9-44"></a>         specific data entries rather than performing calculations or summaries. Do
<a id="__codelineno-9-45" name="__codelineno-9-45" href="#__codelineno-9-45"></a>         not use &#39;query&#39; as a preliminary filtering step when &#39;aggregate&#39; can
<a id="__codelineno-9-46" name="__codelineno-9-46" href="#__codelineno-9-46"></a>         achieve the same result more efficiently (if &#39;aggregate&#39; is available).
<a id="__codelineno-9-47" name="__codelineno-9-47" href="#__codelineno-9-47"></a>
<a id="__codelineno-9-48" name="__codelineno-9-48" href="#__codelineno-9-48"></a>      Query postprocessing (query_postprocessing)
<a id="__codelineno-9-49" name="__codelineno-9-49" href="#__codelineno-9-49"></a>         If the user has requested itemised summaries for retrieved objects, this
<a id="__codelineno-9-50" name="__codelineno-9-50" href="#__codelineno-9-50"></a>           tool summarises each object on an individual basis.
<a id="__codelineno-9-51" name="__codelineno-9-51" href="#__codelineno-9-51"></a>
<a id="__codelineno-9-52" name="__codelineno-9-52" href="#__codelineno-9-52"></a>
<a id="__codelineno-9-53" name="__codelineno-9-53" href="#__codelineno-9-53"></a>    Visualise (visualise)
<a id="__codelineno-9-54" name="__codelineno-9-54" href="#__codelineno-9-54"></a>       Visualise data in a chart from the environment. You can only visualise
<a id="__codelineno-9-55" name="__codelineno-9-55" href="#__codelineno-9-55"></a>         data that is in the environment. If there is nothing relevant in the
<a id="__codelineno-9-56" name="__codelineno-9-56" href="#__codelineno-9-56"></a>         environment, do not choose this tool.
</code></pre></div>

These are the default tools available in a regular initialisation of the Elysia Tree, as well as their tool descriptions. To change the default tools available on a tree, you can initialise the tree with a different `branch_initialisation`, e.g.

<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">tree</span> <span class="o">=</span> <span class="n">Tree</span><span class="p">(</span><span class="n">branch_initialisation</span><span class="o">=</span><span class="s2">&quot;empty&quot;</span><span class="p">)</span>
</code></pre></div>
will create a tree with no tools, and you can add custom tools via `tree.add_tool()`.

</details>

<h2 id="running-the-decision-tree">Running the Decision Tree</h2>
<p>To run the tool-running pipeline of the Elysia decision tree, you can simply call the class, i.e.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="n">response</span><span class="p">,</span> <span class="n">objects</span> <span class="o">=</span> <span class="n">tree</span><span class="p">(</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>    <span class="s2">&quot;Find a single question about Science&quot;</span><span class="p">,</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>    <span class="n">collection_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;JeopardyQuestion&quot;</span><span class="p">]</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="p">)</span>
</code></pre></div>
<details closed>
<summary>Real time updates</summary>
The default behaviour is that Elysia will print updates on what it is doing. In this example, this is
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a> User prompt 
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>                                      
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a> Find a single question about Science 
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>                                      
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a> Assistant response 
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>                                                                              
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a> I will now search for a science question in the JeopardyQuestion collection. 
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>                                                                              
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a> Current Decision 
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>                                                                                                                 
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a> Node: base                                                                                                      
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a> Decision: query                                                                                                 
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a> Reasoning: The user is asking for a question about science.                                                     
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a> The `JeopardyQuestion` collection contains questions and answers, and the category field indicates whether the  
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a> question is about science.                                                                                      
<a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a> Therefore, I should query the `JeopardyQuestion` collection and filter for questions where the category is      
<a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a> science.                                                                                                        
<a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a> I should use the `query` tool to retrieve the questions.                                                        
<a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a>                                                                                                                 
<a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a>                                                                                                                 
<a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a>
<a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a> Assistant response 
<a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a>                                                                                                                 
<a id="__codelineno-12-26" name="__codelineno-12-26" href="#__codelineno-12-26"></a> I am now retrieving a single science question from the JeopardyQuestion collection by filtering for the         
<a id="__codelineno-12-27" name="__codelineno-12-27" href="#__codelineno-12-27"></a> &#39;SCIENCE&#39; category.                                                                                             
<a id="__codelineno-12-28" name="__codelineno-12-28" href="#__codelineno-12-28"></a>                                                                                                                 
<a id="__codelineno-12-29" name="__codelineno-12-29" href="#__codelineno-12-29"></a>
<a id="__codelineno-12-30" name="__codelineno-12-30" href="#__codelineno-12-30"></a> JeopardyQuestion (Weaviate Query) 
<a id="__codelineno-12-31" name="__codelineno-12-31" href="#__codelineno-12-31"></a>                                                         
<a id="__codelineno-12-32" name="__codelineno-12-32" href="#__codelineno-12-32"></a> collection.query.fetch_objects(                         
<a id="__codelineno-12-33" name="__codelineno-12-33" href="#__codelineno-12-33"></a>     filters=Filter.all_of([                             
<a id="__codelineno-12-34" name="__codelineno-12-34" href="#__codelineno-12-34"></a>         Filter.by_property(&#39;category&#39;).equal(&#39;SCIENCE&#39;) 
<a id="__codelineno-12-35" name="__codelineno-12-35" href="#__codelineno-12-35"></a>     ]),                                                 
<a id="__codelineno-12-36" name="__codelineno-12-36" href="#__codelineno-12-36"></a>     limit=1                                             
<a id="__codelineno-12-37" name="__codelineno-12-37" href="#__codelineno-12-37"></a> )                                                       
<a id="__codelineno-12-38" name="__codelineno-12-38" href="#__codelineno-12-38"></a>                                                         
<a id="__codelineno-12-39" name="__codelineno-12-39" href="#__codelineno-12-39"></a>
<a id="__codelineno-12-40" name="__codelineno-12-40" href="#__codelineno-12-40"></a> Current Decision 
<a id="__codelineno-12-41" name="__codelineno-12-41" href="#__codelineno-12-41"></a>                                                                                                 
<a id="__codelineno-12-42" name="__codelineno-12-42" href="#__codelineno-12-42"></a> Node: base.query                                                                                
<a id="__codelineno-12-43" name="__codelineno-12-43" href="#__codelineno-12-43"></a> Decision: query_postprocessing                                                                  
<a id="__codelineno-12-44" name="__codelineno-12-44" href="#__codelineno-12-44"></a> Reasoning: Only one option available: query_postprocessing (and no function inputs are needed). 
<a id="__codelineno-12-45" name="__codelineno-12-45" href="#__codelineno-12-45"></a>                                                                                                 
<a id="__codelineno-12-46" name="__codelineno-12-46" href="#__codelineno-12-46"></a>                                                                                                 
<a id="__codelineno-12-47" name="__codelineno-12-47" href="#__codelineno-12-47"></a>
<a id="__codelineno-12-48" name="__codelineno-12-48" href="#__codelineno-12-48"></a> Current Decision 
<a id="__codelineno-12-49" name="__codelineno-12-49" href="#__codelineno-12-49"></a>                                                                                                                 
<a id="__codelineno-12-50" name="__codelineno-12-50" href="#__codelineno-12-50"></a> Node: base                                                                                                      
<a id="__codelineno-12-51" name="__codelineno-12-51" href="#__codelineno-12-51"></a> Decision: text_response                                                                                         
<a id="__codelineno-12-52" name="__codelineno-12-52" href="#__codelineno-12-52"></a> Reasoning: I have already retrieved a science question from the JeopardyQuestion collection in the previous     
<a id="__codelineno-12-53" name="__codelineno-12-53" href="#__codelineno-12-53"></a> turn. The question is: &quot;This organ removes excess glucose from the blood &amp; stores it as glycogen&quot;. The answer   
<a id="__codelineno-12-54" name="__codelineno-12-54" href="#__codelineno-12-54"></a> is &quot;Liver&quot;. I should now respond to the user with this question.                                                
<a id="__codelineno-12-55" name="__codelineno-12-55" href="#__codelineno-12-55"></a>                                                                                                                 
<a id="__codelineno-12-56" name="__codelineno-12-56" href="#__codelineno-12-56"></a>                                                                                                                 
<a id="__codelineno-12-57" name="__codelineno-12-57" href="#__codelineno-12-57"></a>
<a id="__codelineno-12-58" name="__codelineno-12-58" href="#__codelineno-12-58"></a> Assistant response 
<a id="__codelineno-12-59" name="__codelineno-12-59" href="#__codelineno-12-59"></a>                                                                                                                
<a id="__codelineno-12-60" name="__codelineno-12-60" href="#__codelineno-12-60"></a> Here&#39;s a science question for you: &quot;This organ removes excess glucose from the blood &amp; stores it as glycogen?&quot; 
<a id="__codelineno-12-61" name="__codelineno-12-61" href="#__codelineno-12-61"></a>                                                                                                                
<a id="__codelineno-12-62" name="__codelineno-12-62" href="#__codelineno-12-62"></a>
</code></pre></div>
</details>

<p>This will run through the decision tree, where the decision agent will choose tools based on what tools are available, what branch the decision agent is currently on, and context.</p>
<p>The <code>response</code> will be a concatenation of all responses that the model output (at each decision step and during any other response outputs):
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>&#39;I will now search for a science question in the JeopardyQuestion collection. I am now retrieving a single science question from the JeopardyQuestion collection by filtering for the \&#39;SCIENCE\&#39; category. Here\&#39;s a science question for you: &quot;This organ removes excess glucose from the blood &amp; stores it as glycogen?&quot;&#39;
</code></pre></div></p>
<p>The <code>objects</code> will be a list of objects that were added to the environment during that tree run:
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="nb">print</span><span class="p">(</span><span class="n">objects</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>[
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>    [
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>        {
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>            &#39;category&#39;: &#39;SCIENCE&#39;,
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>            &#39;question&#39;: &#39;This organ removes excess glucose from the blood &amp; stores it as glycogen&#39;,
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>            &#39;answer&#39;: &#39;Liver&#39;,
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>            &#39;uuid&#39;: &#39;b28ca48a-9a8d-417c-9ed1-e487132740ed&#39;,
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>            &#39;collection_name&#39;: &#39;JeopardyQuestion&#39;,
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>            &#39;chunk_spans&#39;: [],
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>            &#39;_REF_ID&#39;: &#39;query_JeopardyQuestion_0_0&#39;
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>        }
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>    ]
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>]
</code></pre></div></p>
<p>In this case, the model searched Weaviate using a <code>fetch_objects</code> search (no hybrid or semantic search), and used a <code>limit=1</code>, so only returned one object. The decision agent recognised that the query tool was called successfully, added a single object to the environment, and then finally recognised that the task was completed and therefore finalised the process with a <code>text_response</code>, informing the user of what the question was.</p>
<p>Note that the query tool was able to correctly use the filter <code>Filter.by_property('category').equal('SCIENCE')</code>, as the preprocessing step identified the unique groups for the property <code>'category'</code>, which was handed down to the query tool.</p>
<h2 id="continuing-the-conversation">Continuing the Conversation</h2>
<p>By calling the same <code>Tree</code> class a second time, the conversation history is automatically included in the context of the decision tree. So if you were to ask:
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="n">tree</span><span class="p">(</span><span class="s2">&quot;What about animals?&quot;</span><span class="p">)</span>
</code></pre></div></p>
<details closed>
<summary>Real time updates</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a> User prompt 
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>                     
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a> What about animals? 
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>                     
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a> Assistant response 
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>                                                                                    
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a> I will now search for a question about animals in the JeopardyQuestion collection. 
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>                                                                                    
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a> Current Decision 
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>                                                                                                                 
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a> Node: base                                                                                                      
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a> Decision: query                                                                                                 
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a> Reasoning: The user is now asking about animals, following a previous question about science.                   
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a> The `JeopardyQuestion` collection contains questions and answers, and the category field indicates whether the  
<a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a> question is about animals.                                                                                      
<a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a> Therefore, I should query the `JeopardyQuestion` collection and filter for questions where the category is      
<a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a> animals.                                                                                                        
<a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a> I should use the `query` tool to retrieve the questions.                                                        
<a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a>                                                                                                                 
<a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a>                                                                                                                 
<a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a>
<a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a> Assistant response 
<a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a>                                                                                                                 
<a id="__codelineno-18-26" name="__codelineno-18-26" href="#__codelineno-18-26"></a> I am now retrieving a single question about animals from the JeopardyQuestion collection by filtering for the   
<a id="__codelineno-18-27" name="__codelineno-18-27" href="#__codelineno-18-27"></a> &#39;ANIMALS&#39; category.                                                                                             
<a id="__codelineno-18-28" name="__codelineno-18-28" href="#__codelineno-18-28"></a>                                                                                                                 
<a id="__codelineno-18-29" name="__codelineno-18-29" href="#__codelineno-18-29"></a>
<a id="__codelineno-18-30" name="__codelineno-18-30" href="#__codelineno-18-30"></a> JeopardyQuestion (Weaviate Query) 
<a id="__codelineno-18-31" name="__codelineno-18-31" href="#__codelineno-18-31"></a>                                                         
<a id="__codelineno-18-32" name="__codelineno-18-32" href="#__codelineno-18-32"></a> collection.query.fetch_objects(                         
<a id="__codelineno-18-33" name="__codelineno-18-33" href="#__codelineno-18-33"></a>     filters=Filter.all_of([                             
<a id="__codelineno-18-34" name="__codelineno-18-34" href="#__codelineno-18-34"></a>         Filter.by_property(&#39;category&#39;).equal(&#39;ANIMALS&#39;) 
<a id="__codelineno-18-35" name="__codelineno-18-35" href="#__codelineno-18-35"></a>     ]),                                                 
<a id="__codelineno-18-36" name="__codelineno-18-36" href="#__codelineno-18-36"></a>     limit=1                                             
<a id="__codelineno-18-37" name="__codelineno-18-37" href="#__codelineno-18-37"></a> )                                                       
<a id="__codelineno-18-38" name="__codelineno-18-38" href="#__codelineno-18-38"></a>                                                         
<a id="__codelineno-18-39" name="__codelineno-18-39" href="#__codelineno-18-39"></a>
<a id="__codelineno-18-40" name="__codelineno-18-40" href="#__codelineno-18-40"></a> Current Decision 
<a id="__codelineno-18-41" name="__codelineno-18-41" href="#__codelineno-18-41"></a>                                                                                                 
<a id="__codelineno-18-42" name="__codelineno-18-42" href="#__codelineno-18-42"></a> Node: base.query                                                                                
<a id="__codelineno-18-43" name="__codelineno-18-43" href="#__codelineno-18-43"></a> Decision: query_postprocessing                                                                  
<a id="__codelineno-18-44" name="__codelineno-18-44" href="#__codelineno-18-44"></a> Reasoning: Only one option available: query_postprocessing (and no function inputs are needed). 
<a id="__codelineno-18-45" name="__codelineno-18-45" href="#__codelineno-18-45"></a>                                                                                                 
<a id="__codelineno-18-46" name="__codelineno-18-46" href="#__codelineno-18-46"></a>                                                                                                 
<a id="__codelineno-18-47" name="__codelineno-18-47" href="#__codelineno-18-47"></a>
<a id="__codelineno-18-48" name="__codelineno-18-48" href="#__codelineno-18-48"></a> Current Decision 
<a id="__codelineno-18-49" name="__codelineno-18-49" href="#__codelineno-18-49"></a>                                                                                                                 
<a id="__codelineno-18-50" name="__codelineno-18-50" href="#__codelineno-18-50"></a> Node: base                                                                                                      
<a id="__codelineno-18-51" name="__codelineno-18-51" href="#__codelineno-18-51"></a> Decision: text_response                                                                                         
<a id="__codelineno-18-52" name="__codelineno-18-52" href="#__codelineno-18-52"></a> Reasoning: I have already retrieved a question about animals from the JeopardyQuestion collection in the        
<a id="__codelineno-18-53" name="__codelineno-18-53" href="#__codelineno-18-53"></a> previous turn. The question is: &quot;It&#39;s the only living mammal in the order Proboseidea&quot;. The answer is           
<a id="__codelineno-18-54" name="__codelineno-18-54" href="#__codelineno-18-54"></a> &quot;Elephant&quot;. I should now respond to the user with this question.                                                
<a id="__codelineno-18-55" name="__codelineno-18-55" href="#__codelineno-18-55"></a>                                                                                                                 
<a id="__codelineno-18-56" name="__codelineno-18-56" href="#__codelineno-18-56"></a>                                                                                                                 
<a id="__codelineno-18-57" name="__codelineno-18-57" href="#__codelineno-18-57"></a>
<a id="__codelineno-18-58" name="__codelineno-18-58" href="#__codelineno-18-58"></a> Assistant response 
<a id="__codelineno-18-59" name="__codelineno-18-59" href="#__codelineno-18-59"></a>                                                                                             
<a id="__codelineno-18-60" name="__codelineno-18-60" href="#__codelineno-18-60"></a> Here is an animal question for you: &quot;It&#39;s the only living mammal in the order Proboseidea?&quot; 
<a id="__codelineno-18-61" name="__codelineno-18-61" href="#__codelineno-18-61"></a>                                                                                             
<a id="__codelineno-18-62" name="__codelineno-18-62" href="#__codelineno-18-62"></a>
</code></pre></div>
</details>

<p>Then the decision agent is aware that the context of the first question, i.e. "retrieve a single question", and uses that to frame its responses and queries for the second question, changing the filter from <code>"SCIENCE"</code> to <code>"ANIMALS"</code>. The conversation history can be viewed by running:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="nb">print</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">conversation_history</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>[
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>    {&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Find a single question about Science&#39;},
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>    {
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>        &#39;role&#39;: &#39;assistant&#39;,
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>        &#39;content&#39;: &#39;I will now search for a science question in the JeopardyQuestion collection. I am now 
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>retrieving a single science question from the JeopardyQuestion collection by filtering for the \&#39;SCIENCE\&#39; 
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>category. Here\&#39;s a science question for you: &quot;This organ removes excess glucose from the blood &amp; stores it as 
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>glycogen?&quot;&#39;
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>    },
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a>    {&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;What about animals?&#39;},
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>    {
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a>        &#39;role&#39;: &#39;assistant&#39;,
<a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a>        &#39;content&#39;: &#39;I will now search for a question about animals in the JeopardyQuestion collection. I am now 
<a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a>retrieving a single question about animals from the JeopardyQuestion collection by filtering for the \&#39;ANIMALS\&#39; 
<a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a>category. Here\&#39;s a question about animals for you: &quot;It\&#39;s the only living mammal in the order Proboseidea?&quot;&#39;
<a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a>    }
<a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a>]
</code></pre></div></p>







  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/weaviate/elysia" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/weaviate/elysia-frontend" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/dannyjameswilliams" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M202.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M496 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/thomashacker" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M202.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M496 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/dannyjameswilliams/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/edwardschmuhl/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>